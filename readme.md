  
## **FSM (Finite State Machine) REST-like framework.**   

Небольшой фреймворк для построения систем, описанных как конечные автоматы (КА)  
(Finite State Machines) взаимодействующих между собой по схеме клиент-сервер.  
Взаимодействие происходит путем обмена строковыми сообщениями через общую очередь сообщений.  
Каждый из участников системы и очередь работают в своих потоках,  
вся структура является потокобезопасной т.к. не имеет общих данных.    

В даной версии программы такая структура построена как многопоточная в рамках одного  
процесса, но рассматриваются варианты межпроцессной и межкомпьютерной системы  
т.к. сообщениями являются строки вида:  
**&param1=value1&param2=value2...**. 
Возможность ошибки при передаче сообщения уменьшена за   
счет использования перечислений (enum).    

## **Описание**

Общие компоненты (самого фреймворка):  
|Компонент|Описание  
|--|--|
|**fsm_template.h**| шаблон конечного автомата параметризуемый типом-набором состояний КА  
|**fsm_structs.h,** **fsm_structs.cpp**| содержит описания следующих сущностей:  
||**system_member** - класс-предок на для участников системы  
||**message_queue** - потокобезопасная очередь сообщений  
|| **MSG** - структура описывающая формат сообщений  
|**fsm_log.h, fsm_log.cpp**| Создает для каждого участника системы свой лог с именем  
||**код потока присваемый ОС--имя участника.log**  
|**fsm_packer.h**, **fsm_packer.cpp**| класс-упаковщик\распаковщик строковых параметров сообщений   
|**user_events.h**|перечисление (enum), описывающее события, которыми обмениваются участники  
|**user_descriptions**| описывает соответствие между:
|| событием (кодом enum) и его строковым представлением  
||соответствие между параметром события (кодом enum) и его строковым представлением    

В **основном файле проекта** (пользовательском) нужно описать участников системы  
как наследников класса system, определить набор состояний для каждого участника,  
и написать обработчик для каждого состояния. Обработчик определяет как   
участник системы реагирует на входящее сообщение, находясь в этом состоянии.    

Конкретный пример, приведенный в пользовательском коде **(bank_bankomat.cpp)**,  
описывает простую многопоточную **систему банк + банкомат1 + банкомат2**,  
работающую в одном процессе.  

![Система Банк-Банкомат](https://github.com/dgorokhov/sandbox/raw/master/bank-bankomat.gif)


**Система Банк-Банкомат**
